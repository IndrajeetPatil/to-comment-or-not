---
format:
  revealjs:
    css: style.css
    theme: simple
    slide-number: true
    code-line-numbers: false
    preview-links: auto
    keyboard: true
    touch: true
    help: true
    include-in-header: meta-tags.html
    link-external-newwindow: true
execute:
  echo: true
  eval: false
keywords: ["comments", "software-engineering", "computer-science", "software-development", "code-documentation"]
description-meta: "A comprehensive guide to code commenting best practices for software development. Learn when, how, and why to write effective comments that enhance code clarity and maintainability."
license: "CC0 1.0 Universal"
pagetitle: "To Comment or Not To Comment"
author-meta: "Indrajeet Patil"
date-meta: "`r Sys.time()`"
lang: "en"
dir: "ltr"
image: "media/pipe.jpg"
image-alt: "Preview image for presentation about code commenting best practices"
canonical-url: "https://indrajeetpatil.github.io/to-comment-or-not/"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(eval = FALSE)
```

## To Comment or Not To Comment {style="margin-top: 1em; margin-bottom: 2.5em;"}

:::: {.columns}

::: {.column width="50%"}

::: {style="margin-top: 2em; padding: 1.5em 0;"}

::: {style="font-size: 0.9em; font-weight: bold;"}
Navigating the Art and Science of Code Comments
:::

::: {style="font-size: 0.8em; margin-top: 1em;"}
Indrajeet Patil
:::

:::

:::

::: {.column width="50%"}

::: {style="margin-top: 2em;"}

![](media/pipe.jpg){width="100%" fig-alt="Ren√© Magritte's 'The Treachery of Images' painting showing a pipe with text 'Ceci n'est pas une pipe' (This is not a pipe)"}

:::

:::

::::

::: {.footer style="text-align: center; font-size: 0.55em; color: #999; position: absolute; bottom: 20px; left: 0; right: 0;"}
Source code: [github.com/IndrajeetPatil/to-comment-or-not](https://github.com/IndrajeetPatil/to-comment-or-not/)
:::

## What You'll Learn {.smaller}

- Why commenting matters for code quality and maintainability
- When to comment and when not to comment
- Common commenting pitfalls to avoid
- Practical strategies for writing clear, helpful, and meaningful comments^‚Ä†^
- Tools and techniques for better documentation practices

<br>

::: {style="background-color: #FFFBC1; padding: 20px; border-radius: 25px;text-align: center;"}

üéØ **Goal**

Transform commenting from an afterthought into a deliberate practice.

:::


::: {.aside style="font-size: 0.6em; position: absolute; bottom: 10px; left: 50px;"}

^‚Ä†^Despite Python examples, all the mentioned strategies are **language-agnostic**. None of this advice is dogma; there can be valid reasons and conventions to break these rules.

:::

# "The purpose of commenting is to help the reader know as much as the writer did."
\- Boswell & Foucher


# Why Comments Matter

_Good comments act as guideposts for navigating complex code._

## Why It's Challenging {.smaller}

Multiple pressures during development make thoughtful commenting difficult.

. . .

```{mermaid}
%%| eval: true
%%| echo: false
flowchart TD
    A[Deadline Pressure] --> D[High Cognitive Load]
    B[Complex Problem Solving] --> D
    C[Implementation Focus] --> D

    D --> E[Commenting Shortcuts]

    E --> F[No Comments]
    E --> G[Obvious Comments]

    H[Comment Rot] --> I[Outdated Comments]

    style A fill:#f8f9fa,color:#000
    style B fill:#f8f9fa,color:#000
    style C fill:#f8f9fa,color:#000
    style D fill:#fff3e0,color:#000
    style E fill:#ffebee,color:#000
    style F fill:#ffcdd2,color:#000
    style G fill:#ffcdd2,color:#000
    style H fill:#ef9a9a,color:#000
    style I fill:#ffcdd2,color:#000
```

## _N.B._ Documentation vs. Comments {.smaller}

:::: {.columns}

::: {.column width='60%'}

```{python}
def apply_discount(order_total, customer_tier, is_bulk_order):
    """Apply tiered discount based on customer and order type.

    Args:
        order_total: Pre-discount order amount
        customer_tier: 'bronze', 'silver', 'gold', 'platinum'
        is_bulk_order: True if order quantity > 100 items

    Returns:
        Final discounted amount
    """
    # Base discount rates per tier (as of Q4 2024 policy)
    tier_discounts = {
        'bronze': 0.02, 'silver': 0.05,
        'gold': 0.10, 'platinum': 0.15
    }

    base_discount = tier_discounts.get(customer_tier, 0)

    # Bulk orders get additional 5% off per marketing policy
    # but total discount cannot exceed 25% per finance rules
    if is_bulk_order:
        total_discount = min(base_discount + 0.05, 0.25)
    else:
        total_discount = base_discount

    return order_total * (1 - total_discount)
```

:::

::: {.column width='40%'}

**Documentation**

- API contract
- How to *use* the function
- Parameters & returns
- For function *users*

**Comments**

- Implementation details
- *Why* it works this way
- Business rules & context
- For code *maintainers*

:::

::::

::: {style="background-color: #FFFBC1; padding: 10px; border-radius: 25px; text-align: center; margin-top: 15px;"}

**Documentation for public interface, comments for private implementation.**

:::

# What *Not* to Comment

_Every comment distracts from reading code‚Äîmake sure it's worth the interruption._


## Don't use crutch comments {.smaller}

Crutch comments compensate for unclear code‚Äîfix the code instead.

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Comment compensates for bad naming"}

```{python}
# Check if user can access premium features
def chk(u):
    return u.tier == 'gold' or u.tier == 'platinum'
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Clear naming needs no comment"}

```{python}
def has_premium_access(user):
    return user.tier in ['gold', 'platinum']
```

:::

:::

::::

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Comment explains complex conditional"}

```{python}
# Apply discount if eligible: active account,
# 3+ orders in last month, or loyalty member
if (user.is_active and user.orders_last_month >= 3
    or user.loyalty_status == 'member'):
    apply_discount(user)
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Well-named function obviates comment"}

```{python}
def is_discount_eligible(user):
    frequent_buyer = (user.is_active and
                     user.orders_last_month >= 3)
    loyalty_member = user.loyalty_status == 'member'
    return frequent_buyer or loyalty_member

if is_discount_eligible(user):
    apply_discount(user)
```

:::

:::

::::

::: {style="background-color: #e8f5e9; padding: 8px; border-radius: 10px; text-align: center; color: #2e7d32; font-size: 1.1em;"}

$$
\text{good code} > \text{bad code} + \text{comments}
$$

:::

## {.smaller}

**Don't state the obvious**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# increment counter
counter += 1
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Reset retry count after successful connection
counter = 0
```

:::

:::

::::

**Don't repeat variable names**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# user name variable
user_name = "john"
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Store normalised username for database
user_name = normalize(input)
```

:::

:::

::::

**Don't explain language syntax**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# if statement checks condition
if user.is_active():
    process(user)
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Only process active users per business rule
if user.is_active():
    process(user)
```

:::

:::

::::

## {.smaller}

**Don't write misleading comments**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# Calculate average
return median(values)
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Calculate median for anomaly detection
return median(values)
```

:::

:::

::::

**Don't keep outdated comments**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# TODO: fix this hack (3 years old)
legacy_workaround()
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Use new API endpoint per v3.0 migration
refactored_solution()
```

:::

:::

::::

**Don't use unclear references**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# See the function above
apply_discount()
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Rate logic in pricing.calculate_discount()
apply_discount()
```

:::

:::

::::

## {.smaller}

**Don't retain dead code as comments**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# old_function()
# legacy_code = True
new_function()
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
new_function()
```

:::

:::

::::

**Don't write temporary comments**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# FIXME: broken, fix later
# TODO: optimize this
hacky_solution()
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Current: linear scan (tracked in #1234)
# Future: switch to hash lookup when ready
proper_solution()
```

:::

:::

::::

**Don't confuse docs with comments**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
"""Implementation uses binary search
for O(log n) complexity"""
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
"""Find user by ID."""
# Use binary search for O(log n) lookup
```

:::

:::

::::

## {.smaller}

**Don't use profanity or humour**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# This is a clusterfuck
process_legacy_data()
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Complex legacy integration, needs refactoring
process_legacy_data()
```

:::

:::

::::

**Don't use inside jokes**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# Here be dragons
process_transaction()
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Handles concurrent writes with optimistic locking
process_transaction()
```

:::

:::

::::

**Don't vent frustrations**

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Bad"}

```{python}
# Stupid requirement from management
validate_input()
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Good"}

```{python}
# Business requirement: process within 24h
validate_input()
```

:::

:::

::::

# What to Comment

Whatever helps the reader understand the code more easily: the *what*, the *why*, and/or the *how*.

## Explain the Thought Process {.smaller}

. . .

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå Comments reiterate code"}

```{python}
# Set timeout to 30
timeout = 30

# Connect to database
db.connect(retry=True)

# as per spec
if len(data) == 0:
    return None
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Comments explain rationale"}

```{python}
# Timeout to handle slow network conditions 
# in international deployments
timeout = 30

# Retry enabled to handle observed
# transient network failures
db.connect(retry=True)

# Return None for empty datasets per
# API specification v2.1 section 4.3
if len(data) == 0:
    return None
```

:::

:::

::::

. . .

::: {.callout-tip}

**Good comments explain business logic, design decisions, and non-obvious requirements.**

:::

## Document Non-Obvious Logic {.smaller}

When code uses non-trivial algorithms, explain the approach and trade-offs‚Äîsave future developers time.

. . .

:::: {.columns}

::: {.column width='50%'}

:::{.callout-caution icon=false title="‚ùå No algorithm explanation"}

```{python}
def find_median(arr):
    arr.sort()
    n = len(arr)
    if n % 2:
        result = arr[n//2]
    else:
        result = (arr[n//2-1] + arr[n//2]) / 2
    return result
```

:::

:::

::: {.column width='50%'}

:::{.callout-tip icon=false title="‚úÖ Algorithm details explained"}

```{python}
def find_median(arr):
    # Use sort-based approach:
    # O(n log n) time, modifies input in-place
    arr.sort()
    n = len(arr)
    # odd length: middle element
    if n % 2:
        result = arr[n//2]
    # even length: average of two middle elements
    else:
        result = (arr[n//2-1] + arr[n//2]) / 2
    return result
```

:::

:::

::::

. . .

::: {.callout-tip}

**Comments that don't add any 'new information' are okay if they assist with readability.**

:::

# Tools & Techniques

## Tool Limitations {.smaller}

:::: {.columns}

::: {.column width='50%' .fragment}

**What tools <span style="background-color: #c8e6c9; padding: 2px 6px; border-radius: 4px;">CAN</span> do:**

- Check comment formatting and style
- Flag TODO/FIXME comments
- Detect missing documentation
- Generate basic API documentation

:::

::: {.column width='50%' .fragment}

**What they <span style="background-color: #ffcdd2; padding: 2px 6px; border-radius: 4px;">CANNOT</span> do:**

- Understand if comments explain the "why"
- Assess comment usefulness and clarity
- Determine if business context is missing
- Evaluate comment accuracy after code changes
- Judge whether comments add value

:::

::::

. . .

::: {.callout-note title="The fundamental limitation"}

**Tools can enforce *format* but not *value*.** Good commenting requires human judgment about what information is helpful.

:::

## AI as an Ally {.smaller}

. . .

:::: {.columns}

::: {.column width='60%'}

**Why AI tools can help:**

- Analyze code complexity and suggest documentation
- Identify business logic that needs explanation
- Check comment clarity and helpfulness
- Generate initial documentation drafts

:::

::: {.column width='40%'}

```{mermaid}
%%| eval: true
%%| echo: false
flowchart TD
    H[Human] --> S[Quality Comments]
    A[AI] --> S[Quality Comments]
    H -.->|Collaborates| A
    A -.->|Feedback| H

    style H fill:#e3f2fd
    style A fill:#f3e5f5
    style S fill:#e8f5e8
```

:::

::::

. . .

::: {.callout-tip title="Symbiotic Commenting"}

Write initial comments yourself. Then, ask AI tools to identify gaps, suggest improvements, or validate clarity.

:::

. . .

::: {.callout-tip title="Cross-LLM Review"}

Use a different LLM to evaluate comments than the one used to write the code.

:::

## Code Review Benefits {.smaller}

. . .

```{mermaid}
%%| eval: true
%%| echo: false
flowchart TD
    A[Code Review] --> B[Lower Cognitive Load]
    B --> C[Fresh Perspective]
    B --> D[Focus on Clarity]

    C --> E[Question Assumptions]
    C --> F[Spot Missing Context]
    C --> O[Find Outdated Comments]
    D --> G[Evaluate Intent]
    D --> H[Assess Usefulness]

    E --> I[Better Comments]
    F --> I
    G --> I
    H --> I
    O --> I

    style A fill:#e3f2fd,color:#000
    style B fill:#f3e5f5,color:#000
    style C fill:#f8f9fa,color:#000
    style D fill:#f8f9fa,color:#000
    style E fill:#fff3e0,color:#000
    style F fill:#fff3e0,color:#000
    style G fill:#fff3e0,color:#000
    style H fill:#fff3e0,color:#000
    style O fill:#fff3e0,color:#000
    style I fill:#e8f5e8,color:#000
```

. . .

::: {style="background-color: #FFFBC1; padding: 10px; margin: 10px; border-radius: 25px;text-align: center; font-size: 1.2rem;"}

**Code review transforms commenting from reactive to deliberate!**

:::

# The Benefits

## Context and Understanding {.smaller}

. . .

- Well-written comments make **complex code comprehensible**.

. . .

- Writing thoughtful comments forces you to **articulate your reasoning** and design decisions, improving code quality.

. . .

- Good comments **preserve business knowledge** and domain expertise for future developers.

. . .

- Strategic commenting **reduces onboarding time** for new team members.

. . .

- Consistent commenting practices **reduce cognitive overload** and make maintenance safer.

. . .

<br>

::: {style="background-color: #e8f5e9; padding: 15px; border-radius: 15px; text-align: center;"}

**Invest time in thoughtful comments early‚Äîpractice makes perfect.**

:::

# Thank You

And Happy Commenting! üòä

# For more {data-visibility="uncounted"}

If you are interested in good programming and software development practices, check out my other [slide decks](https://sites.google.com/site/indrajeetspatilmorality/presentations).

# Find me at... {data-visibility="uncounted"}

{{< fa brands linkedin >}} [LinkedIn](https://www.linkedin.com/in/indrajeet-patil-ph-d-397865174/)

{{< fa brands github >}} [GitHub](http://github.com/IndrajeetPatil)

{{< fa solid link >}} [Website](https://sites.google.com/site/indrajeetspatilmorality/)

{{< fa solid envelope >}} [E-mail](mailto:patilindrajeet.science@gmail.com)

